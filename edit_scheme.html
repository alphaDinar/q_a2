<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,300,0,0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/get_scheme.css">
  <link rel="stylesheet" href="css/edit_scheme.css">
  <title>Document</title>
</head>
<body>
  <section class="page">
    <section class="sideBar">
      <button type="button" id="sideBar_tag" class="material-symbols-outlined">linear_scale</button>
      <header>
        <strong>Crop Production</strong>
      </header>
      <nav>
        <small>Edit Resource</small>
        <p>
          <span><i class="material-symbols-outlined">image</i> Images <i class="material-symbols-outlined">chevron_right</i></span>
          <span><i class="material-symbols-outlined">videocam</i> Video <i class="material-symbols-outlined">chevron_right</i></span>
          <span><i class="material-symbols-outlined">description</i> Passage <i class="material-symbols-outlined">chevron_right</i></span>
        </p>
      </nav>
      <footer>
        <a href="dash.html" class="material-symbols-outlined">arrow_back_ios_new</a>
      </footer>
    </section>
    <i class="material-symbols-outlined" id="hide_nav">expand</i>
    <section class="main">
      <nav>
        <i class="material-symbols-outlined" id="toggle_stats">donut_small</i>
        <i class="material-symbols-outlined" id="toggle_stats">slideshow</i>
      </nav>

      <section class="stat_box">
        last_touched 
        ----
        images 
        passages 
        videos
        ----
        add res
        -----
        status -> pending
        ----
        toggle stat button
      </section>

      <section class="add_form_box">
        <form class="add_form">
          <button type="button" class="material-symbols-outlined">close</button>
          <label for="add_res" class="material-symbols-outlined">
            add_a_photo
          </label>
          <!-- <input type="text"> -->
          <input type="text" class="res_type" name="res_type" style="display: none;">
          <input type="text" class="res_name" name="res_name" placeholder="Image name" required>
          <input type="file" accept="image/*" class="image" id="add_res" required>
          <div class="dis_box">
          </div>
          <button type="submit">ADD</button>
        </form>
      </section>
      <section class="add_passage_form">
        <form class="passage_form">
          <button type="button" class="material-symbols-outlined">close</button>
          <input type="text" name="res_type" value="passage" style="display: none;">
          <input type="text" placeholder="Title" name="passage_title">
          <div class="body_box">
            <textarea name="body" placeholder="Body"></textarea>
            <div class="image_box">
              <label for="image_1">
                <input type="file" id="image_1" name="image_1" accept="image/*">
              </label>
              <label for="image_2">
                <input type="file" id="image_2" name="image_2" accept="image/*">
              </label>
              <label for="image_3">
                <input type="file" id="image_3" name="image_3" accept="image/*">
              </label>
            </div>
          </div>
          <button type="submit">ADD</button>
        </form>
      </section>
      <script>
        const passage_body = document.querySelector('.passage_form textarea')
        const passage_image_ins = document.querySelectorAll('.passage_form .body_box label input') 
        const passage_image_labels = document.querySelectorAll('.passage_form .body_box label')
        
        
        passage_image_ins.forEach((el,i)=>{
          el.onchange =()=>{
            var [file] = el.files
            var src = URL.createObjectURL(file)
            passage_image_labels[i].style.backgroundImage = `url(${src})`  
            passage_image_labels[i].draggable = 'true'
          }
        })
      </script>

      <style>
        .passage_form .body_box{
          display: flex;
          height: 500px;
          align-items: center;
          width: 100%;
        }
        .passage_form .image_box{
          width: 35%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-around;
          height: 100%;
        }
        .passage_form .image_box label{
          width: 95%;
          height: 30%;
          background-position: center;
          background: white;
          border: 2px dotted darkgray;
          box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;
          background-size: cover;
        }
        .passage_form .image_box label input{
          display: none;
        }
      </style>

      <section class="edit_screen swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <div class="res_edit_box_nav">
              
              <span>Images</span>
              <input type="text" class="image_search">
              <button type="button" id="add_res_image">+<i class="material-symbols-outlined">add_a_photo</i> </button>
            </div>
            <div class="res_edit_box">
              <div class="res" id="image_res" data-name="pear">
                <div style="background-image: url(images/cocoa.webp);"></div>
                <span>Cococa</span>
                <a data-link="link" data-type="image" id="del_res" class="material-symbols-outlined">delete</a>
              </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="res_edit_box_nav">   
              <span>Videos</span>
              <input type="text" class="video_search">
              <button type="button" id="add_res_video">+<i class="material-symbols-outlined">videocam</i></button>
            </div>
            <div class="res_edit_box">
              <div class="res" id="video_res" data-name="Cocoa">
                <video src="images/chicken.mp4"></video>
                <span>Cococa</span>
                <a data-link="link" data-type="video" id="del_res" class="material-symbols-outlined">delete</a>
              </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="res_edit_box_nav">   
              <span>Passages</span>
              <input type="text" class="passage_search">
              <button type="button" id="add_res_document">+<i class="material-symbols-outlined">description</i></button>
            </div>
            <div class="res_edit_box">
              <div class="res" id="passage_res" data-name="guava" data-body="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quod magnam aliquam illum quae sint facere, asperiores est eaque at obcaecati ad sapiente id facilis sit doloribus beatae repudiandae nobis laudantium!">
                <div style="background-image: url(images/cocoa.webp);"></div>
                <span>Cococa</span>
                <p>
                  <a id="set_res" class="material-symbols-outlined">settings</a>
                  <a data-link="link" data-type="passage" id="del_res" class="material-symbols-outlined">delete</a>
                </p>
              </div>
            </div>
          </div>
        </div>

        <section class="del_prompt_box">
          <span>Are You sure you want to delete</span>
          <i class="del_prompt_box_res">Cocoa</i>
          <div class="del_prompt_box_nav">
            <button style="background: rgb(22, 211, 117);">Yes</button>
            <button style="background: salmon;">No</button>
          </div>
        </section>
      </section>

      <script>
        const del_res = document.querySelectorAll('[id="del_res"]')
        const del_prompt_box = document.querySelector('.del_prompt_box')
        const del_prompt_box_res = document.querySelector('.del_prompt_box i')
        const del_prompt_box_nav = document.querySelectorAll('.del_prompt_box button')

        del_res.forEach(el=>{
          el.onclick =()=>{
            del_prompt_box.classList.add('show')
            del_prompt_box_res.innerHTML = el.parentElement.dataset.name
            del_prompt_box_nav.forEach((button,i)=>{
              button.onclick =()=>{
                if(i === 0){
                  if(el.parentElement.classList.contains('res')){
                    var obj = el.parentElement
                  }else{
                    var obj = el.parentElement.parentElement
                  }
                    obj.classList.add('push')
                    del_prompt_box.classList.remove('show')
                    obj.ontransitionend =()=>{
                      obj.remove()
                    }
                }else{
                  del_prompt_box.classList.remove('show')
                }
              }
            })
          }
        })


        const add_passage_form = document.querySelector('.add_passage_form')
        const add_passage_form_title = document.querySelector('.add_passage_form input[name="passage_title"]')
        const add_passage_form_body = document.querySelector('.add_passage_form textarea')
        const add_passage_form_submit = document.querySelector('.add_passage_form button[type="submit"]')
        const set_res = document.querySelectorAll('[id="set_res"]')

        console.log(add_passage_form_submit)

        set_res.forEach(el=>{
          el.onclick =()=>{
            var obj = el.parentElement.parentElement
            add_passage_form.classList.add('change')
            add_passage_form_title.value = obj.dataset.name
            add_passage_form_body.value = obj.dataset.body
            add_passage_form_submit.innerHTML = 'save changes'
          }
        })
      </script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"
  integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </section>


    
  </section>
  
  <script>
    const res_box = document.querySelector('.res_edit_box')
    const res = document.querySelectorAll('.res')[0]

    for (var i = 0; i < 45; i++) {
      var res_clone = res.cloneNode(true)
      res_box.appendChild(res_clone)
    }

    const screen = document.querySelector('.screen')

  </script>

  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="js/search.js"></script>
  <script>
    image_res.forEach((el,i)=>{
      anime({
        targets : el,
        translateY : [-30,0],
        duration : 800,
        delay : i * 20,
        easing : 'easeInOutExpo',
      })
    })
  </script>

  <script>
    const sideBar = document.querySelector('.sideBar')
    const sideBar_tag = document.getElementById('sideBar_tag')
  
    sideBar_tag.onclick =()=>{
      main.classList.toggle('change')
      sideBar.classList.toggle('change')
    }
  
  
    var screen_swiper = new Swiper('.edit_screen', {
      loop : false,
      speed:1000,
    })

    const edit_screen_pagination = document.querySelectorAll('.sideBar nav p span')
    edit_screen_pagination.forEach((el,i)=>{
      el.onclick =()=>{
        screen_swiper.slideTo(i)
      }
    })
    console.log(edit_screen_pagination)
  </script>
  <script>
    const add_res_image = document.getElementById('add_res_image')
    const add_res_video = document.getElementById('add_res_video')
    const add_res_document = document.getElementById('add_res_document')
    const add_form_box = document.querySelector('.add_form_box')
    const close_form_box = document.querySelector('.add_form_box button')
    const close_passage_form = document.querySelector('.add_passage_form button[type="button"]')

    const dis_box = document.querySelector('.dis_box')

    add_res_image.onclick =()=>{
      dis_box.style.backgroundImage = 'none'
      document.querySelector('.add_form_box .res_type').value = 'image'
      add_form_box.classList.add('change')
    }
    add_res_video.onclick =()=>{
      dis_box.style.backgroundImage = 'none'
      document.querySelector('.add_form_box .res_type').value = 'video'
      document.querySelector('.add_form_box label').innerHTML = 'videocam'
      document.querySelector('.add_form_box .res_name').placeholder = 'video name'
      document.querySelector('.add_form_box input[type="file"]').classList.replace('image','video')
      document.querySelector('.add_form_box input[type="file"]').accept = 'video/*'
      add_form_box.classList.add('change')
    }

    
    add_res_document.onclick =()=>{
      add_passage_form.classList.add('change')
    }

    close_form_box.onclick =()=>{
      add_form_box.classList.remove('change')
    }
    close_passage_form.onclick =()=>{
      add_passage_form.classList.remove('change')
    }
    
  </script>
  <script>
    const image_in = document.querySelector('.add_form input[type="file"]') 
    
    console.log(image_in)

    image_in.onchange =()=>{
      const [file] = image_in.files
      var src = URL.createObjectURL(file)
      if(image_in.classList.contains('image')){
        dis_box.style.backgroundImage = `url(${src})`
        console.log(image_in.files)
      }else{
        const dis_box_video = document.createElement('video')
        dis_box_video.controls = true
        dis_box_video.src = src
        dis_box.appendChild(dis_box_video)
      }
    }
  </script>    
  <script>
    const hide_nav = document.getElementById('hide_nav')
    const main = document.querySelector('.main')

    hide_nav.onclick =()=>{
      console.log('meee')
      main.classList.toggle('hide')
    }

    const toggle_stats = document.getElementById('toggle_stats')
    const stat_box = document.querySelector('.stat_box')

    toggle_stats.onclick=()=>{
      stat_box.classList.toggle('change')
    } 
  </script>


</body>
</html>